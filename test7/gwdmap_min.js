(function(){'use strict';var e;var g=function(a){return"gwd-page"==a.tagName.toLowerCase()||"gwd-page"==a.getAttribute("is")},h=function(a){if(g(a))return a;for(;a&&9!=a.nodeType;)if((a=a.parentElement)&&g(a))return a;return null};function k(a,b){this.Ta=a;this.ha=b}k.prototype.fetch=function(){var a=this.Ma.bind(this),b=this.Ca.bind(this);navigator.geolocation.getCurrentPosition(a,b)};k.prototype.Ma=function(a){a=a.coords;this.Ta(a.latitude,a.longitude,a.accuracy)};k.prototype.Ca=function(a){this.ha(a.message)};var l=function(a,b,c){if(c){var d=document.createEvent("CustomEvent");d.initCustomEvent(a,!0,!0,c)}else d=document.createEvent("Event"),d.initEvent(a,!0,!0);b.dispatchEvent(d);return d},m=function(a,b){var c=function(d){a.removeEventListener("load",c);b(d)};a.addEventListener("load",c)};function n(a,b,c,d){this.I=a;this.C=null;this.fa=c;this.pa=d;a=document.createElement("div");a.innerHTML='<div class="bg"><a class="dir"><div></div></a><div class="res"><div class="title"></div><div class="address"></div><div class="tel"><a href="#"></a></div></div><a class="close"><div></div></a></div>';a.className="ip";a.querySelector(".dir").addEventListener("click",this.Ia.bind(this),!1);a.querySelector(".close").addEventListener("click",this.za.bind(this),!1);this.Ua=a.querySelector(".title");
this.ca=a.querySelector(".address");this.M=a.querySelector(".tel");this.w=this.M.firstChild;this.w.addEventListener("click",this.ya.bind(this));this.c=a;q(this);b.appendChild(a)}var q=function(a){a.c.classList.add("hidden")};n.prototype.ya=function(a){a.preventDefault();a=this.w.href;l("calllocation",this.I,{url:a}).detail.handled||window.open(a)};n.prototype.za=function(a){a.preventDefault();q(this);this.fa()};n.prototype.Ia=function(a){a.preventDefault();this.C&&this.pa(this.C)};function r(a){var b=document.createElement("div");b.innerHTML='<div class="loading"><div></div></div>';b.className="bg hidden";this.c=b;a.appendChild(this.c)}r.prototype.show=function(){this.c.classList.remove("hidden")};function t(a,b,c,d){this.F=b;this.la=c;v(this,d);a.appendChild(this.c)}
var v=function(a,b){var c=document.createElement("div");c.innerHTML='<div class="diag"><div class="title"></div><div class="btns"></div><form method="get"><input type="search" /></form></div>';var d=c.querySelector(".title");d.textContent=b.title;a.Va=d;d=c.querySelector(".btns");a.ea=d;a.F?(w(d,b.qa,a.F),w(d,b.ma,a.O.bind(a,b.oa))):d.classList.add("hidden");var f=c.querySelector("input");f.placeholder=b.na;a.ta=f;b=c.querySelector("form");a.ka=b;b.addEventListener("submit",function(p){p.preventDefault();
this.la(f.value)}.bind(a),!1);a.F&&b.classList.add("hidden");c.classList.add("bg");a.c=c},w=function(a,b,c){var d=document.createElement("a");d.textContent=b;d.addEventListener("click",function(f){f.preventDefault();c()},!1);d.href="#";a.appendChild(d)};t.prototype.O=function(a){this.Va.textContent=a;this.ea.classList.add("hidden");this.ka.classList.remove("hidden");this.c.classList.remove("hidden");this.ta.focus()};function x(){this.Sa="https://www.google.com/jsapi";for(var a=["google","load"],b=window,c=0;b&&c<a.length;c++)b=b[a[c]];this.s=b?0:2;this.u=[]}x.prototype.Ja=function(){for(var a=this.s=0;a<this.u.length;a++)this.u[a]();this.u=[]};
x.prototype.load=function(a){a&&(0==this.s?a():this.u.push(a));if(2==this.s){this.s=1;a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=this.Sa;m(a,this.Ja.bind(this));var b=document.getElementsByTagName("script")[0];b?b.parentNode.insertBefore(a,b):document.getElementsByTagName("head")[0].appendChild(a)}};var y=null,z=function(a){y||(y=new x);y.load(function(){google.load("maps","3.28",a)})};function A(a,b){this.Oa=a;this.Na=new google.maps.places.PlacesService(b)}A.prototype.search=function(a,b,c){this.Na.textSearch({location:a.getCenter(),radius:3*a.getRadius(),query:this.Oa},function(d,f){c(f==google.maps.places.PlacesServiceStatus.OK?d:[])})};var B=function(a){a=a.trim();return window.Enabler?Enabler.getUrl(a):a};function C(a,b,c,d,f,p,u){this.I=a;this.a=null;this.Pa=c;this.wa=d;this.xa=f;this.Qa=p;this.b=u;this.ua=u.limit;this.N=u.radius;this.R=null;this.l=0;this.m=this.T=this.G=this.H=this.X=this.P=this.K=null;this.i=[];this.A=[];this.ba=null;a=document.createElement("div");a.className="map";this.c=a;b.appendChild(a)}
var D=function(a,b){var c=document.createElement("img"),d=function(){c.removeEventListener("load",d,!1);c.removeEventListener("error",d,!1);c.removeEventListener("abort",d,!1);b()};c.addEventListener("load",d,!1);c.addEventListener("error",d,!1);c.addEventListener("abort",d,!1);c.src=B(a)};
C.prototype.ga=function(){this.l--;if(0==this.l){var a=this.b;if(a.lat&&a.lng){var b=new google.maps.LatLng(a.lat,a.lng);var c=a.zoom;var d=!0}else b=new google.maps.LatLng(0,0),c=1;c=new google.maps.Map(this.c,{center:b,zoom:c,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1});this.ba=c.getBounds();google.maps.event.addListener(c,"dragend",this.Ba.bind(this));google.maps.event.addListener(c,"click",this.Ka.bind(this));var f=B(this.b.Y);this.K={url:f,size:new google.maps.Size(34,34),origin:new google.maps.Point(0,
0)};this.P={url:f,size:new google.maps.Size(34,34),origin:new google.maps.Point(34,0)};this.X={url:f,size:new google.maps.Size(37,34),origin:new google.maps.Point(68,0),anchor:new google.maps.Point(10,34)};this.H={url:B(this.b.U),size:new google.maps.Size(32,32),anchor:new google.maps.Point(0,0)};this.R=new A(a.query||"*",c);d&&new google.maps.Marker({position:b,map:c,icon:this.H});this.a=c;this.Pa()}};C.prototype.setOption=function(a,b){this.b[a]=b};
C.prototype.Ba=function(){if(this.m){for(var a=this.a.getBounds(),b=!0,c=0;c<this.A.length;c++)if(a.contains(this.A[c].geometry.location)){b=!1;break}b&&!this.m.getBounds().contains(this.a.getCenter())&&(this.o(),this.Qa())}};C.prototype.o=function(){this.j&&(this.j.setIcon(this.K),this.j=null)};
var E=function(a,b,c,d){a.a&&(b=new google.maps.LatLng(b,c),c=a.a,a.G=b,c.setCenter(b),new google.maps.Marker({position:b,map:c,icon:a.H}),d&&(a.N=d,a.T=new google.maps.Circle({center:b,radius:a.N,map:c,fillColor:"#a2d1f5",fillOpacity:.5,strokeWeight:0}),c.fitBounds(a.T.getBounds())))};e=C.prototype;e.search=function(a){if(this.a){var b=this.N,c=10-this.a.getZoom();0<c&&(b*=c);this.m=new google.maps.Circle({center:this.a.getCenter(),radius:b});this.R.search(this.m,this.ua,this.v.bind(this,a))}};
e.v=function(a,b){for(var c=0;c<this.i.length;c++)this.i[c].setMap(null),google.maps.event.clearInstanceListeners(this.i[c]);this.i.length=0;this.A=b;var d=this.a;for(c=0;c<b.length;c++){var f=new google.maps.Marker({position:b[c].geometry.location,map:d,icon:this.K,shadow:this.X});google.maps.event.addListener(f,"click",this.L.bind(this,c));this.i.push(f)}d.fitBounds(this.m.getBounds());(c=0<b.length)&&(f=d.getBounds())&&!f.contains(b[0].geometry.location)&&(f.extend(b[0].geometry.location),d.fitBounds(f));
a(c)};e.Ka=function(){this.o();this.wa()};e.L=function(a){this.o();this.j=this.i[a];this.xa(this.A[a],this.ia.bind(this))};e.ia=function(a){this.j.setIcon(this.P);this.a.panTo(this.j.getPosition());this.a.panBy(0,a)};e.ra=function(a,b,c,d){d==google.maps.GeocoderStatus.OK?(b=c[0].geometry.location,this.a.setCenter(b),this.a.fitBounds(c[0].geometry.viewport),E(this,b.lat(),b.lng()),a()):b()};var F=function(a,b,c){return a.hasAttribute(b)?parseFloat(a.getAttribute(b)):c},G=function(a,b,c){return a.hasAttribute(b)?a.getAttribute(b):c},H=function(){};goog.inherits(H,HTMLElement);e=H.prototype;e.createdCallback=function(){this.a=null;this.V=this.J=this.W=!1;this.aa=this.b=this.g=this.h=this.f=this.D=null};
e.attachedCallback=function(){if(!this.a){var a={ja:G(this,"msg-geocode-failure","Your location could not be determined. Please enter a valid address."),U:G(this,"gps-src","assets/location.png"),limit:F(this,"result-limit",20),va:{title:G(this,"msg-start-position-prompt","How would you like us to get your position?"),qa:G(this,"msg-gps-button-label","Use GPS"),ma:G(this,"msg-manual-position-button-label","Enter address or zip code"),oa:G(this,"msg-manual-position-prompt","Enter address or zip code"),
na:G(this,"msg-manual-position-placeholder","Address or zip code")},Y:G(this,"marker-src","assets/marker_sprite.png"),$a:G(this,"msg-no-results-found","No results found near you."),radius:F(this,"search-radius",4E4),$:this.hasAttribute("request-user-location")||!this.hasAttribute("start-latitude")||!this.hasAttribute("start-longitude"),zoom:F(this,"start-zoom",16),Ra:this.hasAttribute("show-location-bar"),Ya:this.hasAttribute("include-directions"),Xa:this.hasAttribute("include-click-to-call"),sa:this.hasAttribute("include-drape-image")};
this.hasAttribute("query")&&(a.query=this.getAttribute("query"));this.hasAttribute("start-latitude")&&(a.lat=parseFloat(this.getAttribute("start-latitude")));this.hasAttribute("start-longitude")&&(a.lng=parseFloat(this.getAttribute("start-longitude")));this.hasAttribute("client-id")&&(a.clientId=this.getAttribute("client-id"));this.hasAttribute("api-key")&&(a.da=this.getAttribute("api-key"));a.Ra&&this.hasAttribute("location-bar-color")&&(a.Za=this.getAttribute("location-bar-color"));a.sa&&this.hasAttribute("drape-image-source")&&
(a.Wa=this.getAttribute("drape-image-source"));this.b=a;var b=document.createElement("div");b.className="sizer";this.a=new C(this,b,this.La.bind(this),this.Z.bind(this),this.L.bind(this),this.B.bind(this),a);var c=this.Ha.bind(this),d=this.Fa.bind(this);this.D=navigator.geolocation?new k(c,d):null;this.h=new t(b,this.D&&this.Ga.bind(this),this.Ea.bind(this),a.va);a.$||q(this.h);this.f=new r(b);this.appendChild(b);this.aa=b}"function"!=typeof this.gwdLoad||"function"!=typeof this.gwdIsLoaded||this.gwdIsLoaded()||
(b=(a=h(this))&&"function"==typeof a.gwdIsLoaded,(!a||b&&a.gwdIsLoaded())&&this.gwdLoad());if(null==this.gwdActivate||"function"==typeof this.gwdActivate)null!=this.gwdIsActive&&this.gwdIsActive()||(b=(a=h(this))&&null!=a.gwdIsActive&&"function"==typeof a.gwdIsActive,null==a&&this.gwdActivate(),b&&a.gwdIsActive()&&this.gwdActivate());a=this.a;a.a&&google.maps.event.trigger(a.a,"resize")};
e.gwdLoad=function(){if(!this.V){this.V=!0;var a=this.a,b=a.ga.bind(a);a.l=2;D(a.b.Y,b);++a.l;D(a.b.U,b);++a.l;var c=a.b.clientId;a=a.b.da;var d="";a&&!c&&(d="&key="+a);z({callback:b,other_params:"sensor=true&libraries=places"+(c?"&client="+c:"")+d});b()}};e.gwdIsLoaded=function(){return this.W};e.gwdActivate=function(){this.classList.remove("deactivated");this.J=!0};e.gwdDeactivate=function(){this.classList.add("deactivated");this.J=!1};e.gwdIsActive=function(){return this.J};
e.setCenter=function(a,b,c){q(this.f);E(this.a,a,b,c);this.B()};e.attributeChangedCallback=function(a,b,c){switch(a){case "query":this.a.setOption("query",c);break;case "start-latitude":this.a.setOption("lat",parseFloat(c));break;case "start-longitude":this.a.setOption("lng",parseFloat(c))}};e.La=function(){this.b.$||this.B();this.classList.add("ready");this.W=!0;l("ready",this)};e.Ga=function(){this.f.show();q(this.h);this.D.fetch()};e.Ha=function(a,b,c){this.setCenter(a,b,c)};
e.Fa=function(a){q(this.f);this.h.O(a)};e.Ea=function(a){this.f.show();q(this.h);var b=this.a,c=this.B.bind(this),d=this.Da.bind(this);b.a&&(b.S||(b.S=new google.maps.Geocoder),b.S.geocode({address:a,bounds:b.ba},b.ra.bind(b,c,d)))};e.B=function(){this.b.query?(this.f.show(),this.a.search(this.v.bind(this))):q(this.f);this.Z();l("mapopen",this)};e.v=function(a){q(this.f);a?l("resultsfound",this):(this.h.O(this.b.ja),l("resultsnotfound",this))};e.Da=function(){this.v(!1)};e.Z=function(){this.g&&q(this.g)};
e.L=function(a,b){this.g||(this.g=new n(this,this.aa,this.a.o.bind(this.a),this.Aa.bind(this)));var c=this.g;c.C=a;c.Ua.textContent=a.name;var d=a.vicinity||a.formatted_address;d=d.replace(/, /,",\n");c.ca.textContent=d;a.formatted_phone_number?(c.M.classList.remove("hidden"),c.w.textContent=a.formatted_phone_number,c.w.href="tel:"+a.formatted_phone_number.replace(/[^\d]/g,"")):c.M.classList.add("hidden");c.c.classList.remove("hidden");b(this.g.c.firstChild.offsetHeight/2);b=a.geometry.location.lat();
a=a.geometry.location.lng();l("pinclick",this,{lat:b,lng:a})};e.Aa=function(a){var b=this.a;if(b.a){var c=b.G?b.G.toString():"";a=encodeURIComponent(a.formatted_address);c="https://maps.google.com/maps?saddr="+escape(c)+"&daddr="+a;l("getdirections",b.I,{url:c}).detail.handled||window.open(c)}};document.registerElement("gwd-map",{prototype:H.prototype});}).call(this);
